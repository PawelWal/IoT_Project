<!DOCTYPE html>

<html lang="en">

<head>
	<title>Room info</title>
	<link rel="stylesheet" href="style.css" type="text/css">
</head>


<!-- Include Bootstrap for styling -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<!-- Include the Bootstrap Table CSS
for the table -->
<link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css">

<body>

	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
				aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNavDropdown">
				<ul class="navbar-nav">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="#">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="roominfo.html">Room info</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="searchguests.html">Search guests</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="assignrfidtoroom.html">Assign RFID to room</a>
					</li>

				</ul>
			</div>
		</div>
	</nav>


	<nav class="navbar navbar-light ">
		<div class="container-fluid">
			<div class="d-flex">
				<input id="RoomInput" class="form-control me-2" type="text" placeholder="Room number"
					aria-label="Search">
				<input id="SubmitRoomBtn" class="btn btn-outline-success" type="submit" value="Search">
			</div>
		</div>
	</nav>

	<div class="container" id="guestData">
		<script type="text/javascript">
			document.getElementById('guestData').style.display = "none";
		</script>
		<table id="resTable" class="table-striped border-success">
			<thead>
				<tr>
					<th data-field="id">
						<span class="text-success">
							ID
						</span>
					</th>
					<th data-field="name">
						<span class="text-success">
							Name
						</span>
					</th>
					<th data-field="surname">
						<span class="text-success">
							Surname
						</span>
					</th>
					<th data-field="RFID">
						<span class="text-success">
							RFID
						</span>
					</th>
					<th data-field="phone">
						<span class="text-success">
							Phone
						</span>
					</th>
					<th data-field="email">
						<span class="text-success">
							Email
						</span>
					</th>
				</tr>
			</thead>
		</table>
	</div>



	<!-- Include jQuery and other required
files for Bootstrap -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js">
	</script>

	<!-- Include the JavaScript file
for Bootstrap table -->
	<script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js">
	</script>
	<script type="text/javascript">

		const targetDiv = document.getElementById("guestData");
		const btn = document.getElementById("SubmitRoomBtn");
		btn.onclick = function () {

			$(document).ready(function () {

				var data = { "room_id": document.getElementById("RoomInput").value };

				fetch('http://localhost:8080/api/getRoomInfo', {
					method: "POST",
					headers: {
						'Content-Type': 'application/json'
					},
					body: JSON.stringify(data)
				}).then(response => response.json())
					.then(data => {
						$('table').bootstrapTable({
							data: data
						});
					});
			});


			if (targetDiv.style.display !== "block") {
				targetDiv.style.display = "block";
			}
		};


	</script>
</body>

</html>